#!/bin/zsh

NORMAL="\033[0m"
BOLD="\033[1m"
RED="\033[0;31m"
GREEN="\033[0;32m"
ITALIC="\033[3m"

if [ "$1" = "" ]; then
	echo "${RED}No theme selected!${NORMAL} "
else		
	if [ -f "$ZTHEME_USER_THEME_DIR/$1.zshrc" ]; then
		if [ -n "$RPROMPT" ]; then
			RPROMPT="";
		fi
		source "$ZTHEME_USER_THEME_DIR/$1.zshrc";
		
	elif [ -f "$ZTHEME_SYSTEM_THEME_DIR/$1.zshrc" ]; then
		if [ -n "$RPROMPT" ]; then
			RPROMPT="";
		fi
		source "$ZTHEME_SYSTEM_THEME_DIR/$1.zshrc";
		
	elif [ -f "$ZTHEME_USER_THEME_DIR/default.zshrc" ]; then
		if [ -n "$RPROMPT" ]; then
			RPROMPT="";
		fi
		source "$ZTHEME_USER_THEME_DIR/default.zshrc";
		
	elif [ -f "$ZTHEME_SYSTEM_THEME_DIR/default.zshrc" ]; then
		if [ -n "$RPROMPT" ]; then
			RPROMPT="";
		fi
		source "$ZTHEME_SYSTEM_THEME_DIR/default.zshrc";

	else
		PROMPT="%m%# ";
	fi
	
		if [ -f "$ZTHEME_USER_THEME_DIR/$1.zshrc" ]; then
			echo "#!/bin/zsh\nZSH_THEME='$1'" > "$ZTHEME_USER_CONFIG_DIR/.ztheme"
			echo "${GREEN}The theme was changed to ${BOLD}'$1'${GREEN}! ";
		else
			echo "${RED}The provided theme name was invalid ! "
	fi
fi
